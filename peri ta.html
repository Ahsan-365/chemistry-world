<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modern Periodic Table</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Reset and base styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    /* CSS Variables for colors */
    :root {
      --alkali-metal: #ff9d9d;
      --alkaline-earth: #ffd699;
      --transition-metal: #9dd1ff;
      --post-transition: #a0d9a0;
      --metalloid: #d8b5d8;
      --nonmetal: #ffdd8c;
      --halogen: #ffb966;
      --noble-gas: #a6e3ff;
      --lanthanide: #ffc8f0;
      --actinide: #c8ffc8;
      --dark-bg: #1e1e2f;
      --card-bg: #2a2a40;
      --highlight: #ffcc00;
      --header-gradient: linear-gradient(135deg, #1a1a2e, #16213e);
      --text-light: #f8f8f8;
      --text-medium: #e0e0e0;
      --element-shadow: 0 4px 12px rgba(0,0,0,0.3);
      --element-hover: 0 8px 24px rgba(255,255,255,0.2);
      --loading-gradient: linear-gradient(90deg, #2a2a40, #3a3a5a, #2a2a40);
    }

    /* Body styling */
    body {
      background: var(--header-gradient);
      color: var(--text-light);
      min-height: 100vh;
      padding: 20px;
      line-height: 1.6;
    }

    /* Main container for layout */
    .container {
      max-width: 1400px;
      margin: 0 auto;
    }

    /* Header styling */
    header {
      text-align: center;
      padding: 20px 0 25px;
      position: relative;
    }

    /* Title container with gradient text */
    .title-container {
      background: linear-gradient(45deg, #4a00e0, #8e2de2, #00c9ff, #92fe9d);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      padding: 20px;
      border-radius: 20px;
      margin-bottom: 25px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      border: 1px solid rgba(255,255,255,0.1);
      animation: gradientShift 8s ease infinite;
      background-size: 300% 300%;
    }

    /* Keyframe animation for title gradient */
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    /* Main heading */
    h1 {
      font-size: 3.5rem;
      margin-bottom: 10px;
      font-weight: 800;
      letter-spacing: 1px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.4);
    }

    /* Subtitle text */
    .subtitle {
      color: var(--text-medium);
      font-size: 1.3rem;
      max-width: 700px;
      margin: 0 auto 25px;
      font-weight: 300;
    }

    /* Controls container for search and filters */
    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      max-width: 1000px;
      margin: 0 auto 30px;
      padding: 20px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }

    /* Search box container */
    .search-box {
      flex: 1;
      min-width: 300px;
      position: relative;
    }

    /* Search input field */
    #searchBox {
      width: 100%;
      padding: 16px 20px 16px 55px;
      font-size: 1.1rem;
      border: none;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.1);
      color: white;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
      backdrop-filter: blur(5px);
    }

    /* Search input focus state */
    #searchBox:focus {
      outline: none;
      box-shadow: 0 0 0 3px var(--highlight);
      background: rgba(255, 255, 255, 0.15);
    }

    /* Search icon inside the search box */
    .search-box i {
      position: absolute;
      left: 20px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-light); /* Changed to white for better visibility */
      font-size: 1.3rem; /* Slightly increased size */
      filter: drop-shadow(0 0 2px rgba(0,0,0,0.5)); /* Added subtle shadow for sharpness */
    }

    /* Legend container */
    .legend {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      backdrop-filter: blur(5px);
    }

    /* Individual legend item */
    .legend-item {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.95rem;
      padding: 8px 15px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.1);
      cursor: pointer;
      transition: all 0.2s;
      color: var(--text-medium);
    }

    /* Legend item hover state */
    .legend-item:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    /* Active legend item state */
    .legend-item.active {
      box-shadow: 0 0 0 2px white;
      transform: scale(1.05);
    }

    /* Color swatch in legend */
    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    /* Filter controls container */
    .filter-controls {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    /* Filter button */
    .filter-btn {
      padding: 12px 25px;
      background: linear-gradient(45deg, #ff416c, #ff4b2b);
      color: white;
      border: none;
      border-radius: 50px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(255,75,43,0.3);
    }

    /* Filter button hover state */
    .filter-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(255,75,43,0.4);
    }

    /* Table container for centering and spacing */
    .table-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-bottom: 40px;
    }

    /* Main periodic table grid */
    #periodicTable {
      display: grid;
      grid-template-columns: repeat(18, minmax(50px, 1fr));
      gap: 6px;
      max-width: 1000px;
      margin: 0 auto;
      background: rgba(255, 255, 255, 0.03);
      padding: 20px;
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(0,0,0,0.4);
      backdrop-filter: blur(5px);
    }

    /* Individual element cell */
    .element {
      aspect-ratio: 1/1;
      border-radius: 10px;
      padding: 12px;
      text-align: center;
      cursor: pointer;
      font-size: 14px;
      position: relative;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      box-shadow: var(--element-shadow);
      overflow: hidden;
      border: 2px solid transparent;
      animation: fadeIn 0.5s ease-out;
      color: #000;
      font-weight: 700;
      transform: translateY(0);
    }

    /* Keyframe animation for element fade-in */
    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    /* Element hover state */
    .element:hover {
      transform: scale(1.1) translateY(-5px);
      z-index: 10;
      box-shadow: var(--element-hover);
      border-color: rgba(255, 255, 255, 0.5);
    }

    /* Atomic number within element cell */
    .element .number {
      font-size: 0.9rem;
      font-weight: bold;
      align-self: flex-start;
      opacity: 0.9;
      color: #333;
    }

    /* Element symbol within element cell */
    .element .symbol {
      font-size: 1.8rem;
      font-weight: bold;
      margin: 5px 0;
      text-shadow: 0 1px 3px rgba(255,255,255,0.7);
      color: #000;
    }

    /* Element name within element cell */
    .element .name {
      font-size: 0.75rem;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
      color: #222;
      font-weight: 600;
    }

    /* F-block elements container (Lanthanides & Actinides) */
    .f-block-container {
      max-width: 800px;
      margin: 30px auto 0;
      background: rgba(255, 255, 255, 0.03);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      backdrop-filter: blur(5px);
    }

    /* F-block title */
    .f-block-title {
      text-align: center;
      margin: 0 0 20px;
      color: var(--text-medium);
      font-size: 1.6rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      font-weight: 300;
    }

    /* F-block table grid */
    #fBlockTable {
      display: grid;
      grid-template-columns: repeat(14, minmax(50px, 1fr));
      gap: 6px;
      margin: 0 auto;
    }

    /* Empty cells in the main table grid for layout */
    .empty-cell {
      aspect-ratio: 1/1;
      background: transparent;
    }

    /* Highlight class for search results */
    .highlight {
      background-color: var(--highlight) !important;
      color: #000 !important;
      font-weight: bold;
      box-shadow: 0 0 20px rgba(255, 204, 0, 0.7);
      animation: pulse 1.5s infinite;
      z-index: 20;
    }

    /* Keyframe animation for highlight pulse effect */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }

    /* Modal overlay */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0,0,0,0.9);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    /* Active modal state */
    .modal.active {
      opacity: 1;
      visibility: visible;
    }

    /* Modal content box */
    .modal-content {
      background: linear-gradient(135deg, #2a2a40, #1e1e2f);
      color: #fff;
      padding: 30px;
      border-radius: 25px;
      width: 90%;
      max-width: 650px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 25px 50px rgba(0,0,0,0.5);
      position: relative;
      border: 1px solid rgba(255, 255, 255, 0.1);
      transform: scale(0.9);
      animation: modalAppear 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
    }

    /* Keyframe animation for modal appearance */
    @keyframes modalAppear {
      to { transform: scale(1); }
    }

    /* Close button for modal */
    .closeBtn {
      position: absolute;
      top: 20px;
      right: 25px;
      cursor: pointer;
      font-size: 32px;
      color: #ff6b6b;
      transition: transform 0.2s;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
    }

    /* Close button hover state */
    .closeBtn:hover {
      transform: scale(1.2);
      background: rgba(255,107,107,0.2);
    }

    /* Element header in modal */
    .element-header {
      display: flex;
      align-items: center;
      gap: 25px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    /* Large element symbol in modal */
    .element-symbol-large {
      font-size: 5rem;
      font-weight: bold;
      width: 120px;
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 25px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.3);
      animation: symbolGlow 3s infinite alternate;
    }

    /* Keyframe animation for symbol glow */
    @keyframes symbolGlow {
      0% { box-shadow: 0 0 10px rgba(255,255,255,0.3); }
      100% { box-shadow: 0 0 30px rgba(255,255,255,0.6); }
    }

    /* Large element name in modal */
    .element-name-large {
      font-size: 3rem;
      margin-bottom: 5px;
      color: white;
      text-shadow: 0 2px 10px rgba(0,0,0,0.4);
    }

    /* Element info grid in modal */
    .element-info {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    /* Individual info item in modal */
    .info-item {
      background: rgba(255, 255, 255, 0.05);
      padding: 20px;
      border-radius: 15px;
      transition: transform 0.3s;
      color: var(--text-medium);
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      border: 1px solid rgba(255,255,255,0.05);
    }

    /* Info item hover state */
    .info-item:hover {
      transform: translateY(-8px);
      background: rgba(255, 255, 255, 0.08);
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }

    /* Label for info item */
    .info-label {
      font-size: 1rem;
      color: #bbb;
      margin-bottom: 8px;
    }

    /* Value for info item */
    .info-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: white;
    }

    /* Element description in modal */
    .element-description {
      line-height: 1.8;
      margin-bottom: 30px;
      color: var(--text-medium);
      background: rgba(255, 255, 255, 0.03);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      border: 1px solid rgba(255,255,255,0.05);
    }
    
    /* Loading state for description */
    .loading-description {
      height: 120px;
      border-radius: 15px;
      background: var(--loading-gradient);
      background-size: 300% 100%;
      animation: loading 1.5s infinite;
      margin-bottom: 30px;
    }
    
    /* Keyframe animation for loading indicator */
    @keyframes loading {
      0% { background-position: 100% 0; }
      100% { background-position: -100% 0; }
    }

    /* Wikipedia link button */
    .wiki-link {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 25px;
      background: linear-gradient(45deg, #4a00e0, #8e2de2);
      color: white;
      text-decoration: none;
      border-radius: 50px;
      font-weight: bold;
      transition: all 0.3s;
      margin-top: 10px;
      box-shadow: 0 5px 15px rgba(74,0,224,0.3);
    }

    /* Wikipedia link hover state */
    .wiki-link:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(74,0,224,0.4);
    }
    
    /* API info text */
    .api-info {
      margin-top: 20px;
      font-size: 0.9rem;
      color: #aaa;
      text-align: center;
      padding: 10px;
      background: rgba(0,0,0,0.2);
      border-radius: 8px;
    }

    /* Responsive adjustments for various screen sizes */
    @media (max-width: 900px) {
      #periodicTable {
        grid-template-columns: repeat(18, minmax(40px, 1fr));
      }
      
      #fBlockTable {
        grid-template-columns: repeat(14, minmax(40px, 1fr));
      }
      
      .element .symbol {
        font-size: 1.5rem;
      }
    }

    @media (max-width: 768px) {
      h1 {
        font-size: 2.5rem;
      }
      
      .subtitle {
        font-size: 1.1rem;
      }
      
      #periodicTable {
        grid-template-columns: repeat(18, minmax(35px, 1fr));
        padding: 15px;
      }
      
      #fBlockTable {
        grid-template-columns: repeat(14, minmax(35px, 1fr));
      }
      
      .element {
        padding: 8px;
      }
      
      .element .symbol {
        font-size: 1.3rem;
      }
      
      .element .number {
        font-size: 0.75rem;
      }
      
      .element-info {
        grid-template-columns: 1fr;
      }
      
      .controls {
        flex-direction: column;
        align-items: center;
      }
      
      .element-symbol-large {
        width: 90px;
        height: 90px;
        font-size: 3.5rem;
      }
      
      .element-name-large {
        font-size: 2rem;
      }
    }

    @media (max-width: 480px) {
      h1 {
        font-size: 2rem;
      }
      
      .title-container {
        padding: 15px;
      }
      
      .search-box {
        min-width: unset;
        width: 100%;
      }
      
      #periodicTable {
        grid-template-columns: repeat(18, minmax(30px, 1fr));
        gap: 3px;
        padding: 10px;
      }
      
      #fBlockTable {
        grid-template-columns: repeat(14, minmax(30px, 1fr));
      }
      
      .element {
        padding: 5px;
        border-radius: 6px;
      }
      
      .element .symbol {
        font-size: 1.1rem;
        margin: 2px 0;
      }
      
      .element .number {
        font-size: 0.6rem;
        position: absolute;
        top: 2px;
        left: 4px;
      }
      
      .element .name {
        font-size: 0.5rem;
        display: block;
      }
      
      .f-block-title {
        font-size: 1.3rem;
      }
      
      .legend {
        gap: 8px;
        padding: 10px;
      }
      
      .legend-item {
        font-size: 0.8rem;
        padding: 6px 10px;
      }
      
      .modal-content {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="title-container">
        <h1>MODERN PERIODIC TABLE</h1>
        <p class="subtitle">Discover the building blocks of our universe with Wikipedia descriptions</p>
      </div>
      
      <div class="controls">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input type="text" id="searchBox" placeholder="Search by name, symbol, or atomic number..." />
        </div>
        
        <div class="filter-controls">
          <button class="filter-btn" id="clearFilters">
            <i class="fas fa-filter"></i> Clear Filters
          </button>
        </div>
      </div>
      
      <div class="legend" id="legend">
        <!-- Legend items will be generated here -->
      </div>
    </header>
    
    <div class="table-container">
      <div id="periodicTable"></div>
      
      <div class="f-block-container">
        <h3 class="f-block-title">Lanthanides and Actinides</h3>
        <div id="fBlockTable"></div>
      </div>
    </div>
    
    <div class="modal" id="modal">
      <div class="modal-content">
        <span class="closeBtn" id="closeModal">&times;</span>
        <div id="elementDetails"></div>
      </div>
    </div>
  </div>

  <script>
    // Global variable to track the current modal element
    let currentModalElementNumber = null;
    
    // Array containing data for all main block elements
    const elements = [
      { number: 1, symbol: "H", name: "Hydrogen", mass: 1.008, group: 1, period: 1, category: "nonmetal" },
      { number: 2, symbol: "He", name: "Helium", mass: 4.0026, group: 18, period: 1, category: "noble-gas" },
      { number: 3, symbol: "Li", name: "Lithium", mass: 6.94, group: 1, period: 2, category: "alkali-metal" },
      { number: 4, symbol: "Be", name: "Beryllium", mass: 9.0122, group: 2, period: 2, category: "alkaline-earth" },
      { number: 5, symbol: "B", name: "Boron", mass: 10.81, group: 13, period: 2, category: "metalloid" },
      { number: 6, symbol: "C", name: "Carbon", mass: 12.011, group: 14, period: 2, category: "nonmetal" },
      { number: 7, symbol: "N", name: "Nitrogen", mass: 14.007, group: 15, period: 2, category: "nonmetal" },
      { number: 8, symbol: "O", name: "Oxygen", mass: 15.999, group: 16, period: 2, category: "nonmetal" },
      { number: 9, symbol: "F", name: "Fluorine", mass: 18.998, group: 17, period: 2, category: "halogen" },
      { number: 10, symbol: "Ne", name: "Neon", mass: 20.180, group: 18, period: 2, category: "noble-gas" },
      { number: 11, symbol: "Na", name: "Sodium", mass: 22.990, group: 1, period: 3, category: "alkali-metal" },
      { number: 12, symbol: "Mg", name: "Magnesium", mass: 24.305, group: 2, period: 3, category: "alkaline-earth" },
      { number: 13, symbol: "Al", name: "Aluminium", mass: 26.982, group: 13, period: 3, category: "post-transition" },
      { number: 14, symbol: "Si", name: "Silicon", mass: 28.085, group: 14, period: 3, category: "metalloid" },
      { number: 15, symbol: "P", name: "Phosphorus", mass: 30.974, group: 15, period: 3, category: "nonmetal" },
      { number: 16, symbol: "S", name: "Sulfur", mass: 32.06, group: 16, period: 3, category: "nonmetal" },
      { number: 17, symbol: "Cl", name: "Chlorine", mass: 35.45, group: 17, period: 3, category: "halogen" },
      { number: 18, symbol: "Ar", name: "Argon", mass: 39.948, group: 18, period: 3, category: "noble-gas" },
      { number: 19, symbol: "K", name: "Potassium", mass: 39.098, group: 1, period: 4, category: "alkali-metal" },
      { number: 20, symbol: "Ca", name: "Calcium", mass: 40.078, group: 2, period: 4, category: "alkaline-earth" },
      { number: 21, symbol: "Sc", name: "Scandium", mass: 44.956, group: 3, period: 4, category: "transition-metal" },
      { number: 22, symbol: "Ti", name: "Titanium", mass: 47.867, group: 4, period: 4, category: "transition-metal" },
      { number: 23, symbol: "V", name: "Vanadium", mass: 50.942, group: 5, period: 4, category: "transition-metal" },
      { number: 24, symbol: "Cr", name: "Chromium", mass: 51.996, group: 6, period: 4, category: "transition-metal" },
      { number: 25, symbol: "Mn", name: "Manganese", mass: 54.938, group: 7, period: 4, category: "transition-metal" },
      { number: 26, symbol: "Fe", name: "Iron", mass: 55.845, group: 8, period: 4, category: "transition-metal" },
      { number: 27, symbol: "Co", name: "Cobalt", mass: 58.933, group: 9, period: 4, category: "transition-metal" },
      { number: 28, symbol: "Ni", name: "Nickel", mass: 58.693, group: 10, period: 4, category: "transition-metal" },
      { number: 29, symbol: "Cu", name: "Copper", mass: 63.546, group: 11, period: 4, category: "transition-metal" },
      { number: 30, symbol: "Zn", name: "Zinc", mass: 65.38, group: 12, period: 4, category: "transition-metal" },
      { number: 31, symbol: "Ga", name: "Gallium", mass: 69.723, group: 13, period: 4, category: "post-transition" },
      { number: 32, symbol: "Ge", name: "Germanium", mass: 72.63, group: 14, period: 4, category: "metalloid" },
      { number: 33, symbol: "As", name: "Arsenic", mass: 74.922, group: 15, period: 4, category: "metalloid" },
      { number: 34, symbol: "Se", name: "Selenium", mass: 78.96, group: 16, period: 4, category: "nonmetal" },
      { number: 35, symbol: "Br", name: "Bromine", mass: 79.904, group: 17, period: 4, category: "halogen" },
      { number: 36, symbol: "Kr", name: "Krypton", mass: 83.798, group: 18, period: 4, category: "noble-gas" },
      { number: 37, symbol: "Rb", name: "Rubidium", mass: 85.468, group: 1, period: 5, category: "alkali-metal" },
      { number: 38, symbol: "Sr", name: "Strontium", mass: 87.62, group: 2, period: 5, category: "alkaline-earth" },
      { number: 39, symbol: "Y", name: "Yttrium", mass: 88.906, group: 3, period: 5, category: "transition-metal" },
      { number: 40, symbol: "Zr", name: "Zirconium", mass: 91.224, group: 4, period: 5, category: "transition-metal" },
      { number: 41, symbol: "Nb", name: "Niobium", mass: 92.906, group: 5, period: 5, category: "transition-metal" },
      { number: 42, symbol: "Mo", name: "Molybdenum", mass: 95.95, group: 6, period: 5, category: "transition-metal" },
      { number: 43, symbol: "Tc", name: "Technetium", mass: 98, group: 7, period: 5, category: "transition-metal" },
      { number: 44, symbol: "Ru", name: "Ruthenium", mass: 101.07, group: 8, period: 5, category: "transition-metal" },
      { number: 45, symbol: "Rh", name: "Rhodium", mass: 102.91, group: 9, period: 5, category: "transition-metal" },
      { number: 46, symbol: "Pd", name: "Palladium", mass: 106.42, group: 10, period: 5, category: "transition-metal" },
      { number: 47, symbol: "Ag", name: "Silver", mass: 107.87, group: 11, period: 5, category: "transition-metal" },
      { number: 48, symbol: "Cd", name: "Cadmium", mass: 112.41, group: 12, period: 5, category: "transition-metal" },
      { number: 49, symbol: "In", name: "Indium", mass: 114.82, group: 13, period: 5, category: "post-transition" },
      { number: 50, symbol: "Sn", name: "Tin", mass: 118.71, group: 14, period: 5, category: "post-transition" },
      { number: 51, symbol: "Sb", name: "Antimony", mass: 121.76, group: 15, period: 5, category: "metalloid" },
      { number: 52, symbol: "Te", name: "Tellurium", mass: 127.60, group: 16, period: 5, category: "metalloid" },
      { number: 53, symbol: "I", name: "Iodine", mass: 126.90, group: 17, period: 5, category: "halogen" },
      { number: 54, symbol: "Xe", name: "Xenon", mass: 131.29, group: 18, period: 5, category: "noble-gas" },
      { number: 55, symbol: "Cs", name: "Cesium", mass: 132.91, group: 1, period: 6, category: "alkali-metal" },
      { number: 56, symbol: "Ba", name: "Barium", mass: 137.33, group: 2, period: 6, category: "alkaline-earth" },
      { number: 57, symbol: "La", name: "Lanthanum", mass: 138.91, group: 3, period: 6, category: "lanthanide" },
      { number: 72, symbol: "Hf", name: "Hafnium", mass: 178.49, group: 4, period: 6, category: "transition-metal" },
      { number: 73, symbol: "Ta", name: "Tantalum", mass: 180.95, group: 5, period: 6, category: "transition-metal" },
      { number: 74, symbol: "W", name: "Tungsten", mass: 183.84, group: 6, period: 6, category: "transition-metal" },
      { number: 75, symbol: "Re", name: "Rhenium", mass: 186.21, group: 7, period: 6, category: "transition-metal" },
      { number: 76, symbol: "Os", name: "Osmium", mass: 190.23, group: 8, period: 6, category: "transition-metal" },
      { number: 77, symbol: "Ir", name: "Iridium", mass: 192.22, group: 9, period: 6, category: "transition-metal" },
      { number: 78, symbol: "Pt", name: "Platinum", mass: 195.08, group: 10, period: 6, category: "transition-metal" },
      { number: 79, symbol: "Au", name: "Gold", mass: 196.97, group: 11, period: 6, category: "transition-metal" },
      { number: 80, symbol: "Hg", name: "Mercury", mass: 200.59, group: 12, period: 6, category: "transition-metal" },
      { number: 81, symbol: "Tl", name: "Thallium", mass: 204.38, group: 13, period: 6, category: "post-transition" },
      { number: 82, symbol: "Pb", name: "Lead", mass: 207.2, group: 14, period: 6, category: "post-transition" },
      { number: 83, symbol: "Bi", name: "Bismuth", mass: 208.98, group: 15, period: 6, category: "post-transition" },
      { number: 84, symbol: "Po", name: "Polonium", mass: 209, group: 16, period: 6, category: "post-transition" },
      { number: 85, symbol: "At", name: "Astatine", mass: 210, group: 17, period: 6, category: "halogen" },
      { number: 86, symbol: "Rn", name: "Radon", mass: 222, group: 18, period: 6, category: "noble-gas" },
      { number: 87, symbol: "Fr", name: "Francium", mass: 223, group: 1, period: 7, category: "alkali-metal" },
      { number: 88, symbol: "Ra", name: "Radium", mass: 226, group: 2, period: 7, category: "alkaline-earth" },
      { number: 89, symbol: "Ac", name: "Actinium", mass: 227, group: 3, period: 7, category: "actinide" },
      { number: 104, symbol: "Rf", name: "Rutherfordium", mass: 267, group: 4, period: 7, category: "transition-metal" },
      { number: 105, symbol: "Db", name: "Dubnium", mass: 270, group: 5, period: 7, category: "transition-metal" },
      { number: 106, symbol: "Sg", name: "Seaborgium", mass: 271, group: 6, period: 7, category: "transition-metal" },
      { number: 107, symbol: "Bh", name: "Bohrium", mass: 270, group: 7, period: 7, category: "transition-metal" },
      { number: 108, symbol: "Hs", name: "Hassium", mass: 277, group: 8, period: 7, category: "transition-metal" },
      { number: 109, symbol: "Mt", name: "Meitnerium", mass: 276, group: 9, period: 7, category: "transition-metal" },
      { number: 110, symbol: "Ds", name: "Darmstadtium", mass: 281, group: 10, period: 7, category: "transition-metal" },
      { number: 111, symbol: "Rg", name: "Roentgenium", mass: 282, group: 11, period: 7, category: "transition-metal" },
      { number: 112, symbol: "Cn", name: "Copernicium", mass: 285, group: 12, period: 7, category: "transition-metal" },
      { number: 113, symbol: "Nh", name: "Nihonium", mass: 286, group: 13, period: 7, category: "post-transition" },
      { number: 114, symbol: "Fl", name: "Flerovium", mass: 289, group: 14, period: 7, category: "post-transition" },
      { number: 115, symbol: "Mc", name: "Moscovium", mass: 290, group: 15, period: 7, category: "post-transition" },
      { number: 116, symbol: "Lv", name: "Livermorium", mass: 293, group: 16, period: 7, category: "post-transition" },
      { number: 117, symbol: "Ts", name: "Tennessine", mass: 294, group: 17, period: 7, category: "halogen" },
      { number: 118, symbol: "Og", name: "Oganesson", mass: 294, group: 18, period: 7, category: "noble-gas" }
    ];

    // Array containing data for F-block elements (Lanthanides and Actinides)
    const fBlockElements = [
      // Lanthanides (Period 6, Group 3)
      { number: 58, symbol: "Ce", name: "Cerium", mass: 140.12, group: 3, period: 6, category: "lanthanide" },
      { number: 59, symbol: "Pr", name: "Praseodymium", mass: 140.91, group: 3, period: 6, category: "lanthanide" },
      { number: 60, symbol: "Nd", name: "Neodymium", mass: 144.24, group: 3, period: 6, category: "lanthanide" },
      { number: 61, symbol: "Pm", name: "Promethium", mass: 145, group: 3, period: 6, category: "lanthanide" },
      { number: 62, symbol: "Sm", name: "Samarium", mass: 150.36, group: 3, period: 6, category: "lanthanide" },
      { number: 63, symbol: "Eu", name: "Europium", mass: 151.96, group: 3, period: 6, category: "lanthanide" },
      { number: 64, symbol: "Gd", name: "Gadolinium", mass: 157.25, group: 3, period: 6, category: "lanthanide" },
      { number: 65, symbol: "Tb", name: "Terbium", mass: 158.93, group: 3, period: 6, category: "lanthanide" },
      { number: 66, symbol: "Dy", name: "Dysprosium", mass: 162.50, group: 3, period: 6, category: "lanthanide" },
      { number: 67, symbol: "Ho", name: "Holmium", mass: 164.93, group: 3, period: 6, category: "lanthanide" },
      { number: 68, symbol: "Er", name: "Erbium", mass: 167.26, group: 3, period: 6, category: "lanthanide" },
      { number: 69, symbol: "Tm", name: "Thulium", mass: 168.93, group: 3, period: 6, category: "lanthanide" },
      { number: 70, symbol: "Yb", name: "Ytterbium", mass: 173.05, group: 3, period: 6, category: "lanthanide" },
      { number: 71, symbol: "Lu", name: "Lutetium", mass: 174.97, group: 3, period: 6, category: "lanthanide" },
      
      // Actinides (Period 7, Group 3)
      // Note: While Ac (89) is typically the first in the f-block display, it's also present in the main elements array.
      // We include it here for completeness of the f-block series display logic.
      { number: 90, symbol: "Th", name: "Thorium", mass: 232.04, group: 3, period: 7, category: "actinide" },
      { number: 91, symbol: "Pa", name: "Protactinium", mass: 231.04, group: 3, period: 7, category: "actinide" },
      { number: 92, symbol: "U", name: "Uranium", mass: 238.03, group: 3, period: 7, category: "actinide" },
      { number: 93, symbol: "Np", name: "Neptunium", mass: 237, group: 3, period: 7, category: "actinide" },
      { number: 94, symbol: "Pu", name: "Plutonium", mass: 244, group: 3, period: 7, category: "actinide" },
      { number: 95, symbol: "Am", name: "Americium", mass: 243, group: 3, period: 7, category: "actinide" },
      { number: 96, symbol: "Cm", name: "Curium", mass: 247, group: 3, period: 7, category: "actinide" },
      { number: 97, symbol: "Bk", name: "Berkelium", mass: 247, group: 3, period: 7, category: "actinide" },
      { number: 98, symbol: "Cf", name: "Californium", mass: 251, group: 3, period: 7, category: "actinide" },
      { number: 99, symbol: "Es", name: "Einsteinium", mass: 252, group: 3, period: 7, category: "actinide" },
      { number: 100, symbol: "Fm", name: "Fermium", mass: 257, group: 3, period: 7, category: "actinide" },
      { number: 101, symbol: "Md", name: "Mendelevium", mass: 258, group: 3, period: 7, category: "actinide" },
      { number: 102, symbol: "No", name: "Nobelium", mass: 259, group: 3, period: 7, category: "actinide" },
      { number: 103, symbol: "Lr", name: "Lawrencium", mass: 266, group: 3, period: 7, category: "actinide" }
    ];

    // Mapping of category keys to display labels
    const categories = {
      "alkali-metal": "Alkali Metals",
      "alkaline-earth": "Alkaline Earth",
      "transition-metal": "Transition Metals",
      "post-transition": "Post-Transition",
      "metalloid": "Metalloids",
      "nonmetal": "Nonmetals",
      "halogen": "Halogens",
      "noble-gas": "Noble Gases",
      "lanthanide": "Lanthanides",
      "actinide": "Actinides"
    };

    // Mapping of category keys to CSS color variables
    const categoryColors = {
      "alkali-metal": "var(--alkali-metal)",
      "alkaline-earth": "var(--alkaline-earth)",
      "transition-metal": "var(--transition-metal)",
      "post-transition": "var(--post-transition)",
      "metalloid": "var(--metalloid)",
      "nonmetal": "var(--nonmetal)",
      "halogen": "var(--halogen)",
      "noble-gas": "var(--noble-gas)",
      "lanthanide": "var(--lanthanide)",
      "actinide": "var(--actinide)"
    };

    // Get DOM elements
    const table = document.getElementById("periodicTable");
    const fBlockTable = document.getElementById("fBlockTable");
    const modal = document.getElementById("modal");
    const elementDetails = document.getElementById("elementDetails");
    const closeModalBtn = document.getElementById("closeModal");
    const searchBox = document.getElementById("searchBox");
    const legend = document.getElementById("legend");
    const clearFiltersBtn = document.getElementById("clearFilters");

    let activeCategory = null; // Stores the currently active category filter

    // Initialize the application: create legend, tables, and setup event listeners
    function init() {
      createLegend();
      createTable();
      createFBlockTable();
      setupEventListeners();
    }

    // Creates the interactive color legend based on element categories
    function createLegend() {
      // Clear any existing legend items before regenerating
      legend.innerHTML = ''; 
      for (const [key, label] of Object.entries(categories)) {
        const item = document.createElement("div");
        item.className = "legend-item";
        item.dataset.category = key; // Store category key for filtering
        item.innerHTML = `
          <div class="legend-color" style="background:${categoryColors[key]}"></div>
          <span>${label}</span>
        `;
        legend.appendChild(item);
      }
    }

    // Creates the main periodic table grid
    function createTable() {
      table.innerHTML = ''; // Clear existing table cells
      
      // Create empty cells for the entire grid layout (7 periods x 18 groups)
      // This ensures correct spacing for elements that are not in every row/column
      for (let period = 1; period <= 7; period++) {
        for (let group = 1; group <= 18; group++) {
          const cell = document.createElement("div");
          cell.className = "empty-cell";
          cell.style.gridRow = period;
          cell.style.gridColumn = group;
          table.appendChild(cell);
        }
      }
      
      // Place actual elements into their respective grid positions
      elements.forEach(el => {
        const cell = createElementCell(el);
        cell.style.gridRow = el.period;
        cell.style.gridColumn = el.group;
        table.appendChild(cell);
      });
    }

    // Creates the f-block table (Lanthanides and Actinides, usually below the main table)
    function createFBlockTable() {
      fBlockTable.innerHTML = ''; // Clear existing f-block cells
      
      // Add a placeholder for Lanthanum/Actinium if they are not specifically in the fBlockElements array
      // For this table, we just iterate through the fBlockElements and add them directly.
      fBlockElements.forEach(el => {
        const cell = createElementCell(el);
        fBlockTable.appendChild(cell);
      });
    }

    // Helper function to create an individual element cell (div)
    function createElementCell(el) {
      const cell = document.createElement("div");
      cell.className = "element";
      cell.style.backgroundColor = categoryColors[el.category];
      cell.dataset.category = el.category;
      // Dataset for searching by name, symbol, or number
      cell.dataset.search = `${el.name.toLowerCase()} ${el.symbol.toLowerCase()} ${el.number}`;
      
      cell.innerHTML = `
        <div class="number">${el.number}</div>
        <div class="symbol">${el.symbol}</div>
        <div class="name">${el.name}</div>
      `;
      
      // Add click event listener to show element details in the modal
      cell.addEventListener("click", () => showDetails(el));
      return cell;
    }

    // Displays the detailed information about an element in a modal
    function showDetails(el) {
      // Store the current element's number to prevent displaying old data if fetches are slow
      currentModalElementNumber = el.number;
      
      const modalHTML = `
        <div class="element-header">
          <div class="element-symbol-large" style="background:${categoryColors[el.category]}">
            ${el.symbol}
          </div>
          <div>
            <h2 class="element-name-large">${el.name}</h2>
            <p>${categories[el.category]}</p>
          </div>
        </div>
        
        <div class="element-info">
          <div class="info-item">
            <div class="info-label">Atomic Number</div>
            <div class="info-value">${el.number}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Symbol</div>
            <div class="info-value">${el.symbol}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Atomic Mass</div>
            <div class="info-value">${el.mass}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Group</div>
            <div class="info-value">${el.group === null ? 'N/A' : el.group}</div>
          </div>
          <div class="info-item">
            <div class="info-label">Period</div>
            <div class="info-value">${el.period}</div>
          </div>
        </div>
        
        <div class="loading-description"></div> <!-- Placeholder for loading description -->
        
        <a href="https://en.wikipedia.org/wiki/${el.name}" target="_blank" class="wiki-link">
          <i class="fab fa-wikipedia-w"></i> Read more on Wikipedia
        </a>
        
        <div class="api-info">Description loaded directly from Wikipedia API</div>
      `;

      elementDetails.innerHTML = modalHTML;
      modal.classList.add("active"); // Show the modal

      // Begin fetching Wikipedia description asynchronously
      fetchWikipediaDescription(el);
    }

    // Fetches a summary description for an element from Wikipedia API
    function fetchWikipediaDescription(el) {
      const url = `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(el.name)}`;
      
      fetch(url)
        .then(response => {
          if (!response.ok) {
            // If response is not OK (e.g., 404, 500), throw an error
            throw new Error(`HTTP error! status: ${response.status}`);
          }
          return response.json();
        })
        .then(data => {
          // Only update if the modal is still showing details for the *same* element
          // This prevents race conditions if user clicks multiple elements quickly
          if (currentModalElementNumber !== el.number) return;
          
          const extract = data.extract || 'No description available from Wikipedia.';
          
          const descriptionHTML = `
            <div class="element-description">
              <p>${extract}</p>
            </div>
          `;
          
          // Find the loading placeholder and replace it with the actual description
          const loadingEl = elementDetails.querySelector('.loading-description');
          if (loadingEl) {
            loadingEl.outerHTML = descriptionHTML;
          }
        })
        .catch(error => {
          // Only show error if the modal is still showing details for the *same* element
          if (currentModalElementNumber !== el.number) return;
          
          console.error("Error fetching Wikipedia description:", error);
          const errorHTML = `
            <div class="element-description">
              <p>Failed to load description from Wikipedia.</p>
              <p>Error: ${error.message}</p>
            </div>
          `;
          
          const loadingEl = elementDetails.querySelector('.loading-description');
          if (loadingEl) {
            loadingEl.outerHTML = errorHTML;
          }
        });
    }

    // Filters elements based on search input and active category filter
    function filterElements() {
      const searchValue = searchBox.value.toLowerCase();
      
      document.querySelectorAll(".element").forEach(el => {
        const matchesSearch = searchValue === '' || el.dataset.search.includes(searchValue);
        const matchesCategory = !activeCategory || el.dataset.category === activeCategory;
        
        if (matchesSearch && matchesCategory) {
          el.style.display = "flex"; // Changed from "block" to "flex" to maintain internal layout
          // Apply/remove highlight class based on search match
          if (searchValue && el.dataset.search.includes(searchValue)) {
            el.classList.add("highlight");
          } else {
            el.classList.remove("highlight");
          }
        } else {
          el.style.display = "none";
          el.classList.remove("highlight");
        }
      });
    }

    // Clears all active filters (search and category)
    function clearFilters() {
      searchBox.value = ''; // Clear search input
      activeCategory = null; // Reset active category
      
      // Remove 'active' class from all legend items
      document.querySelectorAll('.legend-item.active').forEach(item => {
        item.classList.remove('active');
      });
      
      filterElements(); // Re-filter elements with no filters applied
    }

    // Sets up all event listeners for user interactions
    function setupEventListeners() {
      // Close modal when close button is clicked
      closeModalBtn.addEventListener("click", () => {
        modal.classList.remove("active");
      });
      
      // Close modal when clicking outside the modal content
      modal.addEventListener("click", (e) => {
        if (e.target === modal) {
          modal.classList.remove("active");
        }
      });
      
      // Filter elements dynamically as user types in search box
      searchBox.addEventListener("input", filterElements);
      
      // Event listener for legend items to filter by category
      document.querySelectorAll('.legend-item').forEach(item => {
        item.addEventListener('click', function() {
          const category = this.dataset.category;
          
          // Toggle active state: if clicked category is already active, deactivate it
          if (activeCategory === category) {
            activeCategory = null;
            this.classList.remove('active');
          } else {
            // Otherwise, set new active category and highlight it
            activeCategory = category;
            // Remove active class from all other legend items
            document.querySelectorAll('.legend-item.active').forEach(i => i.classList.remove('active'));
            this.classList.add('active'); // Add active class to the clicked item
          }
          
          filterElements(); // Apply the new category filter
        });
      });
      
      // Event listener for the "Clear Filters" button
      clearFiltersBtn.addEventListener('click', clearFilters);
    }

    // Initialize the application when the window finishes loading
    window.onload = init;
  </script>
</body>
</html>